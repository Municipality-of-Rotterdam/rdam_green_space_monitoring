$schema: https://azuremlschemas.azureedge.net/latest/commandComponent.schema.json
name: pc_ops
type: command
environment: azureml:pc_ops:X.X.X
version: ${version}
inputs:
  segment_dir:
    type: uri_folder
  segment_metadata: 
    type: uri_file
  img_dir:
    type: uri_folder
  img_metadata:
    type: uri_file
  pc_dir:
    type: uri_folder
  pc_metadata:
    type: uri_file
  num_workers:
    type: number
    optional: true
  resolve_overlapping_trees:
    type: boolean
    optional: true
  debug:
    type: boolean
    optional: true
  overwrite:
    type: boolean
    optional: true
outputs:
  ops_dir:
    type: uri_folder
  ops_metadata:
    type: uri_file
code: ./
command: >-
  sed -i 's/\r//' env_vars.sh &&
  source env_vars.sh &&
  python pc_ops_script.py
  --segment_dir "${{inputs.segment_dir}}"
  --segment_metadata "${{inputs.segment_metadata}}"
  --img_dir "${{inputs.img_dir}}"
  --img_metadata "${{inputs.img_metadata}}"
  --pc_dir "${{inputs.pc_dir}}"
  --pc_metadata "${{inputs.pc_metadata}}"
  --ops_dir "${{outputs.ops_dir}}"
  --ops_metadata "${{outputs.ops_metadata}}"
  $[[--num_workers ${{inputs.num_workers}}]]
  $[[--resolve_overlapping_trees ${{inputs.resolve_overlapping_trees}}]]
  $[[--debug ${{inputs.debug}}]]
  $[[--overwrite ${{inputs.overwrite}}]]
  


