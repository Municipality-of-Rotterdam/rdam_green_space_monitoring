
parameters:
- name: aml_endpoint_name
  type: string
- name: aml_deployment_name
  type: string

steps:
  - task: AzureCLI@2
    displayName: 'Update the default batch deployment'
    inputs:
      azureSubscription: '$(AmlServiceConnection)'
      scriptType: 'bash'
      scriptLocation: 'inlineScript'
      inlineScript: az ml batch-endpoint update --name ${{ parameters.aml_endpoint_name }} --set defaults.deployment_name=${{ parameters.aml_deployment_name }} --resource-group $(AmlResourceGroup) --workspace-name $(AmlWorkspaceName)
